---
title: "AfriAtlas Tutorial: Visualizing African Bird Atlas Data"
author: "Bello Adamu Danmallam"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{AfriAtlas Tutorial: Visualizing African Bird Atlas Data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  message = FALSE,
  warning = FALSE
)
```

# Introduction to AfriAtlas
The AfriAtlas package provides tools for ecologists, conservationists, and bird enthusiasts to download, process, and visualize bird atlas data from the African Bird Atlas Project (ABAP) and associated country-level projects.

# Installation and Loading

Since this is a development version, users install the package directly from GitHub.


```{r eval=FALSE}
# Install dependencies if missing
install.packages(c("devtools", "rnaturalearth", "ggplot2", "sf", "cowplot"))

# Install AfriAtlas from GitHub (Replace 'username' with your GitHub username)
devtools::install_github("bdanmallam/AfriAtlas")
```


```{r eval=TRUE}
library(AfriAtlas)
library(sf)
library(ggplot2)
```

# 1. Working With Species Codes
The mapping functions require numeric Species Codes (e.g., 493 for Barn Swallow). AfriAtlas provides three tools to help you manage these codes.

## 1.1. Lookup a Code by Name: `get_species_code()`
If you know the English common name or scientific name, you can quickly retrieve the code. This function is case-sensitive.

```{r eval=FALSE}
# Find code for Barn Swallow (Hirundo rustica)
code <- get_species_code("Barn Swallow")
code <- get_species_code("Hirundo rustica")
print(code)

# Find code for Hooded vulture (Necrosyrtes monachus)
get_species_code("Hooded vulture")
get_species_code("Necrosyrtes monachus")
```

## 1.2 Browse All Species: `explore_species_codes()`
If you are unsure of the spelling or want to browse the full species codes, this function opens the internal dataset in the RStudio Viewer.

(Note: This function works only in interactive sessions).

```{r eval=FALSE}
explore_species_codes()
```

## 1.3 Reviewing Species Codes: `show_codes()`
Before running a batch process, it is best practice to review the list of codes being used. The `show_codes()` function is a simple utility for this. Note that the primary mapping function, `map_species()`, will stop execution if the list exceeds Spp 10 codes.

```{r eval=FALSE}
# Example list of species codes (e.g., common African species)
my_species_list <- c(129, 311, 437, 846, 11491, 1168)

# Check the list size
show_codes(my_species_list)

# Example of a list exceeding the limit (Will stop map_species() execution)
# show_codes(c(1:12))
```


# 2. Mapping Survey Effort: `map_coverage()` 

The `map_coverage()` function generates a map showing the intensity of bird atlas survey effort, categorized by total hours spent per pentad (e.g., 0â€“1 hr, 2â€“3 hrs, etc.). It also produces accompanying summary statistics, including the number of pentads in each effort category and the mean Â± SE of accumulated hours, which are automatically exported to a CSV file.

Example: Mapping Nigeria's Effort

```{r eval=FALSE}
map_coverage("Nigeria")
```

Example: Mapping South Africa's Effort

```{r eval=FALSE}
map_coverage("South Africa")
```

# 3. Mapping Species Distribution: `map_species()` ðŸ—ºï¸
The `map_species()` function downloads the species sighting data, plots it against overall coverage, and includes a widespreadness pie chart in the top-right corner.

Example: Single Species Map (South Africa)
Running a single species automatically prints the generated plot to the R viewer.

```{r eval=FALSE}
# Species 846: Pin-tailed Whydah
map_species(species_codes = 846, country = "South Africa")
```

Example: Batch Processing (Nigeria)
When multiple species are provided, the function saves all plots as PNG files to the working directory but suppresses the graphical output for efficiency.

```{r eval=FALSE}
# Species 11491 (Common Bulbul), 3718 (White-billed Buffalo Weaver)
map_species(species_codes = c(11491, 3718), country = "Nigeria")
```

The output files will be saved as:

Common Bulbul_Nigeria.png

White-billed Buffalo Weaver_Nigeria.png
